<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.mybatis.example.BlogMapper">

	<select id="loginMember" parameterType="HashMap" resultType="MemberDto">
  		select * from member where userID= #{userID} and userPW = #{userPW}
  	</select>
  	
  	<insert id="insertMember" parameterType="MemberDto" >
  		insert into member values(#{userID},#{userPW},#{userName},#{gender},
  		#{address},#{detailAddress},#{postCode},#{email},#{mobileTelcom},#{tel},
  		#{profile},#{nickName},sysdate,seq_member.nextval,0) 
  	</insert>
  	
  	<select id="idCheck" parameterType="String" resultType="int">
  		select count(*) as count from member where userID=#{userID}
  	</select>
  	
  	<select id="nickNameCheck" parameterType="String" resultType="int">
  		select count(*) as count from member where nickName=#{nickName}
  	</select>
  	<select id="infoMember" parameterType="String" resultType="MemberDto">
  		select * from member where userID=#{userID}
  	</select>
  	<select id="passwordBlur" parameterType="String" resultType="String">
  		SELECT RPAD(REPLACE (SUBSTR(USERPW ,1,1),SUBSTR(USERPW ,1,1),'*'),LENGTH(USERPW),'*') AS PASSWORD FROM MEMBER WHERE  userID=#{userID}
  	</select>
  	<select id="infoModify" parameterType="HashMap" resultType="MemberDto">
  		select * from member where userID= #{userID} and userPW = #{userPW}
  	</select>
  	<update id="infoUpdateMember" parameterType="MemberDto">
  		update member set nickName = #{nickName}, postCode = #{postCode},address=#{address}, detailAddress=#{detailAddress},email=#{email},
  		tel=#{tel}, profile=#{profile}, userName=#{userName},mobileTelcom=#{mobileTelcom} where userID=#{userID}
  	</update>
  	<delete id="deleteMember" parameterType="HashMap">
  		delete from member where userID = #{userID} and userPW = #{userPW}
  	</delete>
  	<select id="listMember" parameterType="HashMap" resultType="MemberDto">
  		SELECT  *  FROM (SELECT rownum AS num, r.* FROM (SELECT *FROM  MEMBER ORDER BY no DESC)r)
  		where num  <![CDATA[>=]]> #{start} and num  <![CDATA[<=]]> #{end} and adminNumber <![CDATA[<=]]> 5
  	</select>
  	<update id="blackUpdate" parameterType="HashMap">
  		update member set adminNumber = #{adminNumber} where no = #{no}
  	</update>
  	<update id="blackUpdateAll" parameterType="HashMap">
  		update member set adminNumber = #{adminNumber} where no = #{no}
  	</update>
  	<select id="blackListMember" parameterType="HashMap" resultType="MemberDto">
  		SELECT  *  FROM (SELECT rownum AS num, r.* FROM (SELECT *FROM  MEMBER ORDER BY no DESC)r)
  		where num  <![CDATA[>=]]> #{start} and num  <![CDATA[<=]]> #{end} and adminNumber <![CDATA[=]]> 6
  	</select>
</mapper>